import React, { useEffect } from 'react'
import { useSelector, useDispatch } from 'react-redux'
import { fetchDataAboutUser } from 'DAL/userFetch'
import { clearUser } from 'redux/actions/user'

import Loader from 'components/Loader'

const ProfileUser = props => {
   const path = props.match.path === '/userData/my'
   const profileId = path ? null : props.match.params.slug
   const profile = useSelector(state => state.user.findUser)
   const dispatch = useDispatch()

   useEffect(() => {
      dispatch(fetchDataAboutUser(profileId))
      return () => dispatch(clearUser())
   }, [dispatch])

   return (
      <div>
         {
            profile
            ? (
               <div>
                  <p>UserId {profile.id}</p>
                  <p>UserName {profile.name}</p>
               </div>
            )
            : <Loader />
         }
      </div>)
}

export default ProfileUser