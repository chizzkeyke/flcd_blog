import { START_FETCH_DATA_USER, SUCCESS_FETCH_DATA_USER, ERROR_FETCH_DATA_USER, LOGOUT } from 'redux/actions/constants'

const token = localStorage.getItem('token')
const initialState = token
   ? {
      loggedIn: true,
      token: token,
      loading: false,
      error: null,
   }
   : {
      loggedIn: false,
      token: null,
      loading: false,
      error: null,
   }

export default function authReducer(state = initialState, action) {
   switch (action.type) {
      case START_FETCH_DATA_USER: {
         return {
            ...state,
            loading: true
         }
      }
      case SUCCESS_FETCH_DATA_USER: {
         const { token } = action.payload
         return {
            ...state,
            loggedIn: true,
            token,
            loading: false
         }
      }
      case ERROR_FETCH_DATA_USER: {
         const { error } = action.payload
         return {
            ...state,
            error,
            loading: false
         }
      }
      case LOGOUT: {
         return {
            ...state,
            loggedIn: false,
            token: null,
            error: null
         }
      }
      default:
         return state
   }
}
