import React from 'react'
import { Link } from 'react-router-dom'
import { useDispatch, useSelector } from 'react-redux'
import { logout } from 'redux/actions/auth'

import './style.css'

const TopBar = () => {
   const isLoggedIn = useSelector(state => state.auth.loggedIn)
   const dispatch = useDispatch()

   const exitCurrentUser = () => {
      return dispatch(logout())
   }

   const renderNotCurrentUserLinks = () => {
      return (
         <ul>
            <li>
               <Link to='/login'>Sign In</Link>
            </li>
            <li>
               <Link to='/register'>Sign Up</Link>
            </li>
            <li>
               <Link to='/'>HomePage</Link>
            </li>
         </ul>
      )
   }

   const renderCurrentUserLinks = () => {
      return (
         <ul>
            <li>
               <Link to='/createNewPost'>Create New Post</Link>
            </li>
            <li>
               <Link to='/'>HomePage</Link>
            </li>
         </ul>
      )
   }
   return (
      <div className='topbar'>
         <div className='logo'>
            <h2>FlyCode</h2>
         </div>
         <div className='nav'>
            {
               isLoggedIn
                  ? renderCurrentUserLinks()
                  : renderNotCurrentUserLinks()
            }
         </div>
         {
            isLoggedIn
               ? (<div className='btn_logout'>
                     <button onClick={exitCurrentUser}>LOGOUT</button>
                  </div>)
               : null 
         }
      </div>
   )
}


export default TopBar