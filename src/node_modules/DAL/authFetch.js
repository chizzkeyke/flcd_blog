import axios from 'axios'
import { startFetchUserData, successFetchUserData, errorFetchUserData } from 'redux/actions/auth'

export const fetchUserData = (options, url) => dispatch => {
    dispatch(startFetchUserData())
    axios({
        method: 'POST',
        url: `https://test.flcd.ru/api/${url}`,
        data: options,
    })
        .then(res => {
            console.log(res)
            localStorage.setItem('token', res.data.token)
            dispatch(successFetchUserData(res.data.token))
        })
        .catch(err => {
            console.log(err)
            dispatch(errorFetchUserData(err))
        })
}